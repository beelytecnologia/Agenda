<div class="container">
  <div class="header">
    <h2>Meus Agendamentos</h2>
    <a routerLink="/schedule/teste-insano" pButton label="Fazer novo Agendamento" icon="pi pi-plus"></a>
  </div>

  <div *ngIf="isLoading()" class="loading">
    <p>Carregando agendamentos...</p>
    <!-- Você pode adicionar um spinner do PrimeNG aqui, ex: <p-progressSpinner></p-progressSpinner> -->
  </div>

  <div *ngIf="errorLoading()" class="error-message">
    <p>{{ errorLoading() }}</p>
    <button pButton label="Tentar Novamente" (click)="loadBookingFromRoute()"></button>
  </div>

  <div *ngIf="!isLoading() && !errorLoading() && bookings().length === 0" class="no-bookings">
    <p>Nenhum agendamento encontrado.</p>
  </div>

  <div *ngIf="!isLoading() && !errorLoading() && bookings().length > 0" class="bookings-list">
    <div *ngFor="let booking of bookings()" class="booking-card">
      <div class="card-header">
        <h4>{{ booking.agend_servico?.nome || 'Serviço não informado' }}</h4>
      </div>
      <div class="card-details">
        <p><strong>Cliente:</strong> {{ booking.cliente_nome || 'N/A' }}</p>
        <p><strong>Profissional:</strong> {{ booking.agend_profissional?.nome || 'N/A' }}</p>
        <p><strong>Filial:</strong> {{ booking.agend_filial?.nome || 'N/A' }}</p>
        <p><strong>Início:</strong> {{ formatDate(booking.inicio) }}</p>
        <p><strong>Fim:</strong> {{ formatDate(booking.fim) }}</p>
      </div>
      <div class="card-footer">
        <button pButton type="button" label="Cancelar Agendamento" icon="pi pi-times"
          class="p-button-danger p-button-outlined" (click)="cancelBooking(booking)" [disabled]="!booking.cancel_hash">
        </button>
      </div>
    </div>
  </div>
</div>